# Item OCR (PyQt5)

Небольшое десктоп‑приложение на PyQt5, которое захватывает область экрана, распознаёт предметы по иконкам (по шаблонам из папки) и выводит их названия в текстовом и JSON формате.

Основано на идее OCR/захвата из проекта ScoreSight [ссылка](https://github.com/royshil/scoresight), но адаптировано под распознавание игровых предметов по шаблонам.

## Установка

Требования:
- Python 3.11 (рекомендуется)
- Windows 10+

Установка зависимостей:
```bash
pip install -r requirements.txt
```

Если у вас установлен Python 3.12/3.13 и возникают проблемы со сборкой `numpy`/`opencv`, создайте отдельное окружение Python 3.11:
```powershell
# Установите Python 3.11 (если не установлен)
# https://www.python.org/downloads/release/python-3110/

# Создайте venv в папке .venv
py -3.11 -m venv .venv

# Активируйте окружение
.\.venv\Scripts\Activate.ps1

# Установите зависимости
python -m pip install --upgrade pip
pip install -r requirements.txt

# Запуск
python src/main.py
```

## Запуск
```bash
python src/main.py
```

## Как пользоваться
1. Подготовьте папку `templates/` с иконками предметов. Имя файла = имя предмета (например, `BlinkDagger.png`).
2. Запустите приложение, укажите папку с шаблонами.
3. Нажмите «Добавить ROI» и выделите прямоугольники слотов предметов (обычно 6 штук). Повторите для всех слотов.
4. Нажмите «Старт». Приложение будет периодически:
   - захватывать каждый ROI,
   - находить лучший шаблон (лучшее совпадение),
   - записывать список найденных предметов в `output/items.txt` и `output/items.json`.

### Параметры распознавания
- ORB (good matches): минимальное число «хороших» совпадений для принятия результата ORB.
- Correlation (0-1): минимальная корреляция для принятия результата шаблонного сопоставления.

## Формат вывода
- `output/items.txt` — по одному названию предмета в строке, в порядке ROIs.
- `output/items.json` — JSON вида:
```json
{
  "timestamp": "2025-01-01T12:00:00Z",
  "items": ["BlinkDagger", "BKB", "Boots", "..."]
}
```

## DPI/Масштабирование Windows
Если масштабирование экрана не 100%, координаты ROIs могут смещаться. Запускайте игру и приложение на одном мониторе и проверяйте корректность выделений. При необходимости заново выделите ROIs под текущий масштаб.

## Ссылки
- Проект-референс ScoreSight: [GitHub](https://github.com/royshil/scoresight)
- Короткое видео: [YouTube](https://www.youtube.com/watch?v=ADShJdItYC4&ab_channel=RoyShilkrot) 